<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nuestro PrÃ³ximo Capricho</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Montserrat:wght@300;400&display=swap" rel="stylesheet">

<style>
body{
    margin:0;
    font-family:'Montserrat', sans-serif;
    color:white;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    background-size:cover;
    background-position:center;
    transition:background-image 1s ease;
}
.overlay{
    position:absolute;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.55);
    z-index:0;
}
.container{
    position:relative;
    width:90%;
    max-width:800px;
    text-align:center;
    animation:fade 0.8s ease;
    z-index:2;
}
h1,h2{
    font-family:'Playfair Display', serif;
}
.riddle{
    font-style:italic;
    margin-bottom:25px;
    opacity:0.95;
    line-height:1.6;
}
.card{
    background: rgba(255,255,255,0.12);
    padding:20px;
    margin:15px 0;
    border-radius:20px;
    cursor:pointer;
    transition:0.3s;
}
.card:hover{
    background: rgba(255,255,255,0.25);
    transform:scale(1.05);
}
button{
    padding:12px 25px;
    border-radius:30px;
    border:none;
    font-size:16px;
    cursor:pointer;
    margin-top:15px;
}
input{
    padding:10px;
    border-radius:20px;
    border:none;
    width:200px;
    text-align:center;
}
/* ğŸ”’ BotÃ³n candado */
.lock-btn{
    position:absolute;
    top:20px;
    right:20px;
    font-size:18px;
    padding:10px 18px;
    border-radius:30px;
    background:rgba(0,0,0,0.6);
    border:1px solid rgba(255,255,255,0.3);
    cursor:pointer;
    z-index:3;
    transition:0.3s;
}
.lock-btn:hover{
    background:rgba(255,0,0,0.6);
    transform:scale(1.05);
}
/* ğŸ’¬ Modal */
.modal{
    display:none;
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.8);
    justify-content:center;
    align-items:center;
    z-index:10;
}
.modal-content{
    background:#111;
    padding:40px;
    border-radius:20px;
    max-width:400px;
    text-align:center;
}
.modal button{
    margin:10px;
}
#winner-img{
    max-width:100%;
    border-radius:20px;
    margin-top:20px;
}
@keyframes fade{
    from{opacity:0; transform:translateY(20px);}
    to{opacity:1; transform:translateY(0);}
}
</style>
</head>
<body>

<div class="overlay"></div>

<div class="container" id="quiz">
    <h1>âœ¨ Nuestra prÃ³xima aventura âœ¨</h1>
    <p>Dicen que el destino no se encuentraâ€¦ se elige.</p>
    <button onclick="startQuiz()">Empezar</button>
</div>

<!-- Modal -->
<div class="modal" id="warningModal">
    <div class="modal-content">
        <h2>ğŸ” Â¿Seguro?</h2>
        <p>
        Esto se desbloquearÃ¡ solo si no quieres ver el resultado final.<br><br>
        Si es asÃ­ continÃºa y nada de lo que has decidido tendrÃ¡ valor...<br><br>
        <strong>TÃº decides.</strong>
        </p>
        <button onclick="closeModal()">Volver</button>
        <button onclick="forceReveal()">Continuar</button>
    </div>
</div>

<script>
// Variables globales
let destinationsGlobal = [];
let question = 1;

let scores = {
    monesterio:0,
    carnota:0,
    miluna:0,
    burgo:0
};

// Fondos
const backgrounds = {
    inicio:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e",
    tiempo:"https://images.unsplash.com/photo-1491553895911-0055eca6402d",
    transporte:"https://images.unsplash.com/photo-1500530855697-b586d89ba3ee",
    norteSur:"https://images.unsplash.com/photo-1501785888041-af3ef285b470",
    cielo:"https://images.unsplash.com/photo-1444703686981-a3abbc4d4fe3",
    montana:"https://images.unsplash.com/photo-1501785888041-af3ef285b470",
    lujo:"https://images.unsplash.com/photo-1506744038136-46273834b3fb",
    comida:"https://images.unsplash.com/photo-1504674900247-0877df9cc836",
    estilo:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1600&q=80",
    misterio:"https://images.unsplash.com/photo-1500534623283-312aade485b7"
};

function setBackground(type){
    document.body.style.backgroundImage = `url(${backgrounds[type]})`;
}

setBackground("inicio");

function startQuiz(){
    question = 1;
    showQuestion();
}

function showQuestion(){
    const quiz = document.getElementById("quiz");

    switch(question){
        case 1:
            setBackground("tiempo");
            quiz.innerHTML=`
            <div class="riddle">
            No se compra, no se guarda,<br>
            pero cuando lo tienesâ€¦ vuela.<br><br>
            Â¿CuÃ¡nto queremos que dure el nuestro?
            </div>
            <h2>Â¿CuÃ¡nto tiempo nos vamos?</h2>
            <div class="card" onclick="selectAnswer('1noche')">ğŸŒ™ 1 noche</div>
            <div class="card" onclick="selectAnswer('2noches')">ğŸŒ„ 2 noches</div>
            `;
            break;
        case 2:
            setBackground("transporte");
            quiz.innerHTML=`
            <div class="riddle">
            Puede tener ruedas o alas,<br>
            lo importante es avanzar juntos.
            </div>
            <h2>Â¿CÃ³mo viajamos?</h2>
            <div class="card" onclick="selectAnswer('coche')">ğŸš— Coche</div>
            <div class="card" onclick="selectAnswer('otro')">âœˆï¸/ğŸš† Otro</div>
            `;
            break;
        case 3:
            setBackground("norteSur");
            quiz.innerHTML=`
            <div class="riddle">
            Â¿Nos vamos hacia el norte o el sur de EspaÃ±a?
            </div>
            <h2>RegiÃ³n preferida</h2>
            <div class="card" onclick="selectAnswer('norte')">ğŸŒ² Norte</div>
            <div class="card" onclick="selectAnswer('sur')">â˜€ï¸ Sur</div>
            `;
            break;
        case 4:
            setBackground("cielo");
            quiz.innerHTML=`
            <div class="riddle">
            Al abrir los ojos,<br>
            lo primero que veamos marcarÃ¡ cÃ³mo empieza el dÃ­a.
            </div>
            <h2>Â¿QuÃ© miramos al despertar?</h2>
            <div class="card" onclick="selectAnswer('cielo')">ğŸŒŒ Cielo</div>
            <div class="card" onclick="selectAnswer('montana')">â›° MontaÃ±a</div>
            `;
            break;
        case 5:
            setBackground("lujo");
            quiz.innerHTML=`
            <div class="riddle">
            No es cuÃ¡nto cuesta,<br>
            sino cÃ³mo se siente.
            </div>
            <h2>Nivel de experiencia</h2>
            <div class="card" onclick="selectAnswer('lujoso')">âœ¨ Lujoso</div>
            <div class="card" onclick="selectAnswer('lujazo')">ğŸ‘‘ Lujazo</div>
            `;
            break;
        case 6:
            setBackground("comida");
            quiz.innerHTML=`
            <div class="riddle">
            Â¿QuÃ© tipo de comida nos apetece mÃ¡s en el viaje?
            </div>
            <h2>Comida favorita</h2>
            <div class="card" onclick="selectAnswer('tapas')">ğŸ· Tapas y cereza</div>
            <div class="card" onclick="selectAnswer('mariscos')">ğŸ¦ Mariscos y carne</div>
            `;
            break;
        case 7:
            setBackground("estilo");
            quiz.innerHTML=`
            <div class="riddle">
            Â¿CÃ³mo nos gusta disfrutar el viaje?
            </div>
            <h2>Estilo romÃ¡ntico</h2>
            <div class="card" onclick="selectAnswer('relajacion')">ğŸ’– RelajaciÃ³n</div>
            <div class="card" onclick="selectAnswer('aventura')">ğŸ Aventura</div>
            `;
            break;
        case 8:
            setBackground("misterio");
            showRiddleFinal();
            break;
    }
}

function selectAnswer(answer){
    // Cambiar fondo segÃºn respuesta
    if(answer==="cielo") setBackground("cielo");
    if(answer==="montana") setBackground("montana");
    calculate(answer);
    question++;
    showQuestion();
}

function calculate(answer){
    switch(answer){
        case "1noche": scores.miluna+=2; scores.burgo+=2; break;
        case "2noches": scores.monesterio+=2; scores.carnota+=2; break;
        case "coche": scores.monesterio+=1; scores.burgo+=2; break;
        case "otro": scores.carnota+=2; scores.miluna+=1; break;
        case "norte": scores.carnota+=2; scores.burgo+=1; break;
        case "sur": scores.monesterio+=2; scores.miluna+=1; break;
        case "cielo": scores.monesterio+=2; scores.miluna+=2; break;
        case "montana": scores.carnota+=2; scores.burgo+=2; break;
        case "lujoso":
        case "lujazo":
            scores.monesterio+=1; scores.carnota+=1; scores.miluna+=1; scores.burgo+=1;
            break;
        case "tapas": scores.monesterio+=2; scores.miluna+=2; break;
        case "mariscos": scores.carnota+=2; scores.burgo+=2; break;
        case "relajacion": scores.monesterio+=2; scores.miluna+=2; scores.carnota+=1; scores.burgo+=1; break;
        case "aventura": scores.carnota+=2; scores.burgo+=2; scores.monesterio+=0; scores.miluna+=0; break;
    }
}

function showRiddleFinal(){
    document.getElementById("quiz").innerHTML=`
        <h2>ğŸ” Antes de descubrirlo...</h2>
        <div class="riddle">
        No tengo boca pero puedo hablar,<br>
        no tengo alas pero puedo volar.<br><br>
        Si me compartes, crezco.<br>
        Si me guardas, muero.<br><br>
        Â¿QuÃ© soy?
        </div>
        <input id="password" placeholder="Escribe la respuesta">
        <br>
        <button onclick="checkPassword()">Descubrir destino</button>
    `;
}

function openModal(){
    document.getElementById("warningModal").style.display="flex";
}

function closeModal(){
    document.getElementById("warningModal").style.display="none";
}

function forceReveal(){
    window.location.href="https://www.stage.es/musicales/el-rey-leon";
}

function checkPassword(){
    const input=document.getElementById("password").value.toLowerCase().trim();
    if(input==="amor"){
        showResults();
    } else {
        alert("Mmmâ€¦ esa no es la respuesta ğŸ’­");
    }
}

function showResults(){
    destinationsGlobal = [
        {name:"Monesterio (Badajoz)", score:scores.monesterio, img:"resources/monesterio.jpg"},
        {name:"CabaÃ±inas do bosque (Galicia)", score:scores.carnota, img:"resources/nidos1.webp"},
        {name:"Hotel Miluna (Toledo)", score:scores.miluna, img:"resources/miluna.jpg"},
        {name:"Burgo de Osma (Soria)", score:scores.burgo, img:"resources/burgo.png"}
    ];

    destinationsGlobal.sort((a,b)=>b.score-a.score);
    const winner = destinationsGlobal[0];

    let html=`
        <div class="lock-btn" onclick="openModal()">
            ğŸ”’ Blockeado ğŸ”’
        </div>
        <h2>ğŸ† Nuestro destino ganador ğŸ†</h2>
        <h1>âœ¨ ${winner.name} âœ¨</h1>
        <img id="winner-img" src="${winner.img}" alt="${winner.name}">
        <p>PrepÃ¡rateâ€¦ porque esto se hace realidad ğŸ’›</p>
        <button onclick="showRanking()">Â¿Quieres ver las otras opciones?</button>
    `;

    document.getElementById("quiz").innerHTML = html;
}

function showRanking(){
    let html=`<h2>ğŸŒŸ Ranking completo de destinos ğŸŒŸ</h2>`;
    destinationsGlobal.forEach((d,i)=>{
        let medal=["ğŸ¥‡","ğŸ¥ˆ","ğŸ¥‰","ğŸ’”"][i];
        html+=`<p>${medal} <strong>${d.name}</strong> â€” ${d.score} puntos</p>`;
    });
    document.getElementById("quiz").innerHTML=html;
}
</script>

</body>
</html>
